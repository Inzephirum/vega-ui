# Для контрибьюторов

Основная команда разработки — CSSSR, но любые другие команды всегда приветствуются к участию в разработке.

## Что делать, если хочешь прислать PR?

Если вы обнаружили баг или в библиотеке не хватает какого-то нужного вам функционала...

#### Если изменения большие:

- уточнить, не запланированы ли или не ведутся ли прямо сейчас нужные вам работы
- согласовать, что хотите добавить/поправить, при необходимости — созвониться, спланировать работы и задачи. Это нужно, чтобы не возникло дублирования работ
- прислать пулл-реквест и пройти ревью

#### Если нет времени на согласования или вы просто хотите сообщить о проблеме, никак не участвуя в ее решении

Можно создать ишью. Команда разработки сама запланирует работу над ним.

#### Если изменения маленькие, либо если по какой-то причине вы не смогли согласовывать свою работу

Можно просто прислать пулл-реквест.

Обратите внимание, что в таком случае может оказаться, что мелкие баги или опечатки уже поправлены в каком-то из открытых пулл-реквестов.

#### Если ваш пулл-реквест не прошел ревью мейнтейнеров

Рассмотрите вариант (временный или постоянный) — оставить данный компонент в вашем собственном проекте, не добавляя его в библиотеку. Если это не подходит, то...

_При добавлении нового компонента_: если ваш компонент точно должен быть в библиотеке, и нет возможности/времени его доработать в соответствие с комментариями на ревью — можно пометить ваш компонент лейблом `draft` в сторибуке и влить его.

_При изменениях в существующих компонентах_: будем решать по ситуации. Точно не должна быть сломана обратная совместимость. Остальное обсуждаемо.

## Ревью

При разработке библиотеки важно, чтобы компоненты были наиболее удобны и понятны для пользователей этой библиотеки. Ревью помогает улучшать и контролировать качество кода.

При ревью происходит распространение новых знаний о проекте и об установленных на нем практиках. Можно обсуждать непонятные моменты, задавать вопросы, предлагать улучшения и иные варианты решения задачи.

В репозиторий добавлен файл [CODEOWNERS](../.github/CODEOWNERS), где можно найти списки мейнтейнеров либы или конкретных компонентов (если они были добавлены разработчиками не из команды CSSSR). Ревьюеры из этого файла будут автоматически проставляться у пулл-реквестов, поэтому вы почти всегда можете быть уверены, что авторы затронутых вами компонентов смогут получить уведомление о новом пулл-реквесте, который им следует поревьюить.

Ревьюерам и ревьюемым важно соблюдать вежливость в обсуждении вопросов и разногласий. Часто проще созвониться и обсудить вопрос голосом, чем долго обмениваться длинными сообщениями, пытаясь донести свою идею. После созвонов не забывайте писать итог, к которому пришли, чтобы остальные ревьюеры тоже смогли узнать про ваши договоренности.

## Оформление пулл-реквеста

Помните:

- читать чужой код всегда сложнее, чем писать свой
- при работе над своей задачей очень легко забыть о чем-то важном, особенно если она объемная
- ревью может занимать много времени, это нормально
- не стоит ставить аппрувы просто чтобы они были, если вам непонятна сделанная в PR работа

Всегда стоит стараться облегчить членам команды чтение и проверку вашего кода, так как любой разработчик и любой ревьюер — это человек, который может пропустить какую-то деталь, не учесть что-то при проектировании, неточно понять задачу. Сделать ваш пулл-реквест более понятным для остальных поможет:

- [шаблон с чеклистом для пулл-реквестов](../.github/pull_request_template.md), который будет автоматически подхватываться гитхабом при создании PR.
- ваши собственные комментарии к диффу в гитхабе, которые вы можете добавить не дожидаясь появления первых вопросов
- комментарии в коде к неочевидным решениям или специальным браузерным хакам (но! Комментариями в коде не следуюет злоупотреблять, код должен говорить сам за себя и быть понятным)

Стоит помнить, что ревью – это процесс общения, и часто какие-то пункты можно опустить по договорённости, поэтому не стоит считать, что данный чек-лист это незыблемый набор правил.

## Помимо всего сказанного

Примеры вещей, на которые стоит обратить внимание при оформлении:

- Автор задачи выбрал правильную ветку для PR
- Код написан понятно, имена переменных читаемы, не используются излишние сложные конструкции
- Написанный код подходит под описание задачи, не было проведено другой дополнительной работы, которая не касается задачи, но при этом может повлиять на другие части библиотеки
- Есть ли тесты на новую функциональность или на исправленный баг (если баг не связан с вёрсткой, то с большей вероятностью к нему можно добавить тесты)
- Тесты понятны, каждый тест-кейс написан в отдельном блоке. Тест максимально устойчив, т.е он не должен проверять или опираться на логику, которая может часто изменяться (например тексты)
- В CI нет ошибок сборки, типов, stylelint, eslint, prettier
- Стенд сторибука собрался
- На стенде не падают страницы, не возникают неожиданные ошибки в консоли
- Текущее решение не пересекается и не противоречит с одним или несколькими текущими PR
- Стараться избегать числовых отступов в css, максимально использовать переменные и css-классы из дизайн-системы
